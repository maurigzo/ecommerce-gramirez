(this["webpackJsonpecommerce-gramirez"]=this["webpackJsonpecommerce-gramirez"]||[]).push([[0],{40:function(e,t,a){e.exports=a.p+"static/media/loadingSpin.4135c94e.svg"},55:function(e,t,a){e.exports=a.p+"static/media/CartIcon.cd22f79e.svg"},68:function(e,t,a){e.exports=a(91)},73:function(e,t,a){},74:function(e,t,a){},79:function(e,t,a){},87:function(e,t,a){},89:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(19),c=a.n(l),i=(a(73),a(74),a(101)),o=a(58),m=a(59),u=a(96),s=a(65),d=a(55),E=a.n(d),g=a(8);var f=function(e){var t=e.cartIcon;return r.a.createElement(g.c,{to:"/cart"},r.a.createElement("img",{src:t,width:"30",height:"30",alt:"Cart logo"}))},h=(a(79),a(12)),p=a(48),b=a(7),v=a(28),y=(a(54),v.initializeApp({apiKey:"AIzaSyBFQWaEXa69hRWnJj1HciOUMV3ppjLcHdQ",authDomain:"ecommerce-gramirez.firebaseapp.com",databaseURL:"https://ecommerce-gramirez.firebaseio.com",projectId:"ecommerce-gramirez",storageBucket:"ecommerce-gramirez.appspot.com",messagingSenderId:"629537438401",appId:"1:629537438401:web:c8de3d187c5f0e412bb240"}));function O(){return v.firestore(y)}var j=r.a.createContext([]),C=function(){return Object(n.useContext)(j)};function N(e){var t=e.children,a=Object(n.useState)([]),l=Object(b.a)(a,2),c=l[0],i=l[1],o=Object(n.useState)([]),m=Object(b.a)(o,2),u=m[0],s=m[1],d=Object(n.useState)({name:"",email:"",phone:""}),E=Object(b.a)(d,2),g=E[0],f=E[1],y=Object(n.useState)(),C=Object(b.a)(y,2),N=C[0],w=C[1],x=Object(n.useState)(!0),I=Object(b.a)(x,2),S=I[0],k=I[1],z=Object(n.useState)(""),A=Object(b.a)(z,2),P=A[0],B=A[1];function L(){return c.reduce((function(e,t){return e+t.price}),0)}return Object(n.useEffect)((function(){O().collection("items").orderBy("title").get().then((function(e){0===e.size&&console.log("No items found"),s(e.docs.map((function(e){return Object(h.a)(Object(h.a)({},e.data()),{},{id:e.id})})))}))}),[]),r.a.createElement(j.Provider,{value:{itemList:c,addItem:function(e){var t=-1;if(c.length>0&&(t=void 0===c.find((function(t){return t.id===e.id}))?-1:c.find((function(t){return t.id===e.id}))),-1===t){var a=u.find((function(t){return t.id===e.id}));a.amount=e.amount;var n=[].concat(Object(p.a)(c),[a]);n[n.length-1].price=parseFloat(n[n.length-1].price)*e.amount,i(n)}else{var r=c.findIndex((function(t){return e.id===t.id})),l=Object(p.a)(c);l[r].amount+=e.amount,l[r].price=parseFloat(l[r].price)*l[r].amount,i(l)}},quantity:function(){return c.reduce((function(e,t){return e+t.amount}),0)},getTotal:L,userInfo:g,onNameChange:function(e){f(Object(h.a)(Object(h.a)({},g),{},{name:e.target.value}))},onEmailChange:function(e){f(Object(h.a)(Object(h.a)({},g),{},{email:e.target.value}))},onPhoneChange:function(e){f(Object(h.a)(Object(h.a)({},g),{},{phone:e.target.value}))},generateOrder:function(){var e=O().collection("orders"),t={buyer:g,items:c,date:v.firestore.Timestamp.fromDate(new Date),total:L()};e.add(t).then((function(e){var t=e.id;w(t)})).catch((function(e){console.log("error :"+e)})).finally((function(){k(!1)}))},orderId:N,loading:S,fieldsCompleted:function(){return!(0===g.name.length||0===g.phone.length||0===g.email.length)},validatedEmail:function(){return console.log("email1: "+g.email+" email2: "+P),console.log("tipos: email1: "+typeof g.email+" email2: "+typeof P),console.log("email valido?: "+g.email===P),g.email===P},onEmailValidationChange:function(e){B(e.target.value)}}},t)}var w={color:"white",textAlign:"center"};var x=function(e){var t=e.appName,a=C().quantity;return r.a.createElement(i.a,{id:"navbar"},r.a.createElement(o.a,{md:"2"},r.a.createElement(m.a,{variant:"outline-dark"},r.a.createElement(g.c,{style:{color:"white"},to:"/"},"Home"))),r.a.createElement(o.a,{md:"2"},r.a.createElement(u.a,{alignRight:!0,title:"Categories",id:"dropdown-menu-align-right"},r.a.createElement(s.a.Item,null,r.a.createElement(g.b,{to:"/category/".concat("Office")}," Office")),r.a.createElement(s.a.Item,null,r.a.createElement(g.b,{to:"/category/".concat("Urban")}," Urban")))),r.a.createElement(o.a,{md:"4"},r.a.createElement(i.a.Brand,{style:w}," ",t," ")),r.a.createElement(o.a,{md:"2"}),r.a.createElement(o.a,{md:"1",style:{textAlign:"right"}},r.a.createElement(f,{cartIcon:E.a})),r.a.createElement(o.a,{md:"1"},r.a.createElement("p",{style:{color:"white",textAlign:"left"}},a())))};var I=function(e){var t=e.greeting;return r.a.createElement("h1",{style:{verticalAlign:"middle"}},t)},S=(a(87),a(102)),k=a(97),z=a(98);var A=function(e){var t=e.itemId,a=e.title,n=e.description,l=e.price,c=e.image;return r.a.createElement(S.a.Item,{as:"li"},r.a.createElement("img",{className:"img-responsive img-rounded",src:c,alt:"",id:"itemImage"}),r.a.createElement(k.a,null,r.a.createElement(o.a,{md:{span:4,offset:3}},r.a.createElement("h3",{className:"list-group-item-heading",style:{color:"black"}},r.a.createElement(g.b,{to:"/item/".concat(t)},a))),r.a.createElement(o.a,{md:{span:2,offset:3}},r.a.createElement("h4",null,r.a.createElement(z.a,{variant:"secondary",style:{background:"rgba(0,145,0,1)"}},"$","".concat(l))))),r.a.createElement(k.a,null,r.a.createElement("p",{className:"list-group-item-text lead",style:{color:"black"}},n)))};var P=function(e){var t=e.items;return r.a.createElement("div",{className:"container"},r.a.createElement("ul",{className:"list-group"},t.map((function(e){return r.a.createElement(A,{key:e.id,itemId:e.id,title:e.title,description:e.description,price:e.price,image:e.image,initial:e.initial,min:e.min,max:e.max})}))))},B=a(6);var L=function(e){var t=e.greeting,a=Object(n.useState)([]),l=Object(b.a)(a,2),c=l[0],i=l[1],o=Object(n.useState)(!0),m=Object(b.a)(o,2),u=m[0],s=m[1],d=Object(B.f)().categoryid;return Object(n.useEffect)((function(){var e=O().collection("items");(void 0!==d?e.where("category","==",d).orderBy("title"):e.orderBy("title")).get().then((function(e){0===e.size&&console.log("No items found"),s(!1),i(e.docs.map((function(e){return Object(h.a)(Object(h.a)({},e.data()),{},{id:e.id})})))}))}),[d]),r.a.createElement("header",{className:"App-header"},r.a.createElement(I,{greeting:u?"loading...":t}),r.a.createElement(P,{items:c}))},V=(a(88),a(89),a(99)),F=a(100);var T=function(e){var t=e.amount,a=e.min,n=e.max,l=e.background,c=e.text,i=e.operation;return r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{as:"input",type:"button",value:c,disabled:t===a||t===n,style:{color:"white",background:l,width:40,textAlign:"center"},onClick:function(){return i()}}))};var R=function(e){var t=e.initial,a=e.min,l=e.max,c=e.showAmount,i=Object(n.useState)(t),o=Object(b.a)(i,2),m=o[0],u=o[1];return Object(n.useEffect)((function(){c(m)}),[m]),Object(n.useEffect)((function(){u(t)}),[t]),r.a.createElement("div",{className:"form-row justify-content-center"},r.a.createElement("div",{className:"form-group col-md-4"},r.a.createElement(V.a,null,r.a.createElement(T,{amount:m,min:a,text:"-",background:"red",operation:function(){m>a&&u(m-1)}}),r.a.createElement(F.a.Control,{type:"text",placeholder:m,readOnly:!0,style:{textAlign:"center",borderRadius:6,width:"30px"}}),r.a.createElement(T,{amount:m,max:l,text:"+",background:"green",operation:function(){m<l&&u(m+1)}}))))};var q=function(e){var t=e.item,a=e.addItem,l=Object(n.useState)(),c=Object(b.a)(l,2),i=c[0],u=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,null,r.a.createElement(o.a,null,r.a.createElement("h1",{className:"page-header"},t.title))),r.a.createElement(k.a,null,r.a.createElement(o.a,{md:{span:8}},r.a.createElement("img",{className:"img-responsive img-rounded",src:t.image,alt:"",style:{height:256,width:256}})),r.a.createElement(o.a,{md:{span:4}},r.a.createElement("h3",null,"Description"),r.a.createElement("p",null,t.description),r.a.createElement("h1",null,"$ ".concat(t.price)),r.a.createElement(R,{initial:t.initial,min:t.min,max:t.max,showAmount:u}),r.a.createElement("br",null),r.a.createElement(g.b,{to:"/cart"},r.a.createElement(m.a,{id:"purchaseButton",size:"lg",onClick:function(){a(t.id,i)}}," ","Purchase ".concat(i,"!")," ")))))},G=a(40),W=a.n(G);var D=function(e){var t=e.image;return r.a.createElement("img",{src:t,alt:"loading",style:{margin:"auto"}})};var $=function(){var e=Object(n.useState)({}),t=Object(b.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!0),i=Object(b.a)(c,2),o=i[0],m=i[1],u=Object(B.f)().id,s=C().addItem;return Object(n.useEffect)((function(){O().collection("items").doc(u).get().then((function(e){m(!1),e.exists&&l(Object(h.a)(Object(h.a)({},e.data()),{},{id:e.id}))}))}),[u]),r.a.createElement("div",null,o?r.a.createElement(D,{image:W.a}):void 0===a.id?r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Item not found",r.a.createElement("br",null),r.a.createElement(g.c,{to:"/",className:"alert-link"},"Press here to return to the homepage.")):r.a.createElement(q,{item:a,addItem:function(e,t){s({id:e,amount:t})}}))};var H=function(e){var t=e.userInfo,a=e.onNameChange,n=e.onEmailChange,l=e.onPhoneChange,c=e.emailValidation,i=e.isEmailValid,m=e.onEmailValidationChange;return r.a.createElement(F.a,null,r.a.createElement(F.a.Row,null,r.a.createElement(F.a.Group,{as:o.a},r.a.createElement(F.a.Label,null,"Type your full name"),r.a.createElement(F.a.Control,{placeholder:"Juan Lopez",value:t.name,onChange:a})),r.a.createElement(F.a.Group,{as:o.a},r.a.createElement(F.a.Label,null,"Type your phone"),r.a.createElement(F.a.Control,{placeholder:"Phone",value:t.phone,onChange:l}))),r.a.createElement(F.a.Row,null,r.a.createElement(F.a.Group,{as:o.a,controlId:"formGridEmail"},r.a.createElement(F.a.Label,null,"Type your email"),r.a.createElement(F.a.Control,{type:"email",placeholder:"email",value:t.email,onChange:n})),r.a.createElement(F.a.Group,{as:o.a},r.a.createElement(F.a.Label,null,"Retype your email"),r.a.createElement(F.a.Control,{className:void 0!==c&&(i?"form-control is-valid":"form-control is-invalid"),type:"email",placeholder:"email",value:c,onChange:m,id:"emailValidation",required:!0}),!i&&r.a.createElement(F.a.Text,{className:"invalid-feedback",htmlFor:"emailValidation"},"The typed email, doesn't match."))))};var J=function(e){var t=e.quantity;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"display-5 mb-2 text-center"},"Shopping Cart"),r.a.createElement("p",{className:"mb-5 text-center"},r.a.createElement("i",{className:"text-info font-weight-bold"},t)," items in your cart"))};var Q=function(e){var t=e.item;return r.a.createElement("tr",{key:t.id},r.a.createElement("td",{"data-th":"Product"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-3 text-left"},r.a.createElement("img",{src:t.image,alt:"",className:"img-fluid d-none d-md-block rounded mb-2 shadow ",style:{height:129,width:129}})),r.a.createElement("div",{className:"col-md-9 text-left mt-sm-2"},r.a.createElement("h4",null,t.title)))),r.a.createElement("td",{"data-th":"Price"},"$".concat(t.price)),r.a.createElement("td",{"data-th":"Quantity"},r.a.createElement("p",null,t.amount)))};var U=function(e){var t=e.itemList;return r.a.createElement("table",{id:"shoppingCart",className:"table table-condensed table-responsive"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"60%"}},"Product"),r.a.createElement("th",{style:{width:"20%"}},"Price"),r.a.createElement("th",{style:{width:"20%"}},"Quantity"),r.a.createElement("th",{style:{width:"16%"}}))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement(Q,{item:e})}))))};var M=function(){var e=Object(n.useState)(!1),t=Object(b.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),i=Object(b.a)(c,2),o=i[0],u=i[1],s=Object(n.useState)(),d=Object(b.a)(s,2),E=d[0],f=d[1],h=C(),p=h.itemList,v=h.quantity,y=h.getTotal,O=h.userInfo,j=h.onNameChange,N=h.onEmailChange,w=h.onPhoneChange,x=h.generateOrder,I=h.fieldsCompleted;return Object(n.useEffect)((function(){u(O.email===E)}),[E]),r.a.createElement(r.a.Fragment,null,v()>0&&r.a.createElement("div",{className:"row w-100"},r.a.createElement("div",{className:"col-lg-12 col-md-12 col-12"},r.a.createElement(J,{quantity:v()}),r.a.createElement(U,{itemList:p}),r.a.createElement("div",{className:"float-right text-right"},r.a.createElement("h4",null,"Subtotal:"),r.a.createElement("h1",null,"$"+y())))),a&&r.a.createElement(H,{userInfo:O,onNameChange:j,onEmailChange:N,onPhoneChange:w,isEmailValid:o,emailValidation:E,onEmailValidationChange:function(e){f(e.target.value)}}),a&&I()&&o&&r.a.createElement(g.b,{to:"/postSale"},r.a.createElement(m.a,{size:"lg",onClick:function(){x()}},"Purchase!")),0===v()&&r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"You have 0 items in your cart.",r.a.createElement("br",null),r.a.createElement(g.c,{to:"/",className:"alert-link"},"Press here to continue shopping.")),v()>0&&!a&&r.a.createElement("div",{className:"row mt-4 d-flex align-items-center"},r.a.createElement("div",{className:"col-sm-6 order-md-2 text-right"},r.a.createElement(m.a,{onClick:function(){l(!0)}},"Checkout")),r.a.createElement("div",{className:"col-sm-6 mb-3 mb-m-1 order-md-1 text-md-left"},r.a.createElement(g.b,{to:"/"},r.a.createElement("i",{className:"fas fa-arrow-left mr-2"})," Continue Shopping"))))};var K=function(){var e=C(),t=e.orderId,a=e.loading;return Object(n.useEffect)((function(){console.log("mounted")}),[]),r.a.createElement("div",null,a?r.a.createElement(D,{image:W.a}):r.a.createElement("div",null,r.a.createElement("h2",null,"Successful purchase!"),r.a.createElement("h2",null,"Here is your order ID: ".concat(t))))};var X=function(){return r.a.createElement(N,null,r.a.createElement("div",{className:"App"},r.a.createElement(g.a,null,r.a.createElement(x,{appName:"Ecommerce-Gramirez",categories:[{name:"A",id:"A"},{name:"B",id:"B"}]}),r.a.createElement(B.c,null,r.a.createElement(B.a,{exact:!0,path:"/"},r.a.createElement(L,{greeting:"Welcome Customer!"})),r.a.createElement(B.a,{path:"/category/:categoryid"},r.a.createElement(L,{greeting:"Welcome Customer!"})),r.a.createElement(B.a,{path:"/item/:id"},r.a.createElement($,null)),r.a.createElement(B.a,{path:"/cart"},r.a.createElement(M,null)),r.a.createElement(B.a,{path:"/postSale"},r.a.createElement(K,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[68,1,2]]]);
//# sourceMappingURL=main.538df2d0.chunk.js.map